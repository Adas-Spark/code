<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ada's Spark Memory Engine - A searchable collection of memories about Ada Rose Swenson">
    <title>Ada's Spark: Hope Against Childhood Cancer</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Vue.js from CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header Section -->
        <header class="header" role="banner">
            <div class="container">
                <div class="header-content">
                    <div class="logo-section">
                        <div class="logo" aria-label="Ada's Spark Logo">
                            <div class="sun-icon">
                                <i class="fas fa-sun" aria-hidden="true"></i>
                            </div>
                            <div class="logo-text">
                                <span class="logo-main">ada's</span>
                                <span class="logo-sub">SPARK</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" role="main">
            <div class="container">
                <!-- Title Section -->
                <section class="title-section">
                    <h1 class="main-title">Ada's Spark: Hope Against Childhood Cancer</h1>
                    <div class="description">
                        <p class="lead-text">
                            Created in memory of five-year-old Adalyn "Ada" Rose Swenson who died from leukemia,
                        </p>
                        <p class="body-text">
                            <strong>Ada's Spark is an organization dedicated to improving childhood cancer outcomes and 
                            supporting families affected by the disease.</strong> The organization aims to fund innovative 
                            research for cures and treatments, advocate for policies that prioritize young patients, 
                            celebrate life, provide educational resources, spread joy, and support families dealing 
                            with grief. Driven by Ada's spirit and the motto "Life isn't about waiting for the storm to 
                            pass...It's about learning to dance in the rain," <strong>Ada's Spark works to make a meaningful 
                            impact in the lives of those touched by childhood cancer.</strong>
                        </p>
                    </div>
                </section>

                <!-- Search Section -->
                <section class="search-section" aria-labelledby="search-heading">
                    <h2 id="search-heading" class="section-title">
                        Example questions (click to populate)<br>
                        or ask your own:
                    </h2>
                    
                    <!-- Example Questions -->
                    <div class="example-questions" role="list">
                        <button 
                            v-for="question in exampleQuestions" 
                            :key="question.id"
                            @click="populateQuestion(question.text)"
                            class="example-question-btn"
                            type="button"
                            role="listitem"
                            :aria-label="'Populate search with: ' + question.text"
                        >
                            <i class="fas fa-minus" aria-hidden="true"></i>
                            {{ question.text }}
                        </button>
                    </div>

                    <!-- Search Input -->
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <input 
                                v-model="searchQuery"
                                @keyup.enter="performSearch"
                                type="text" 
                                class="search-input"
                                placeholder="Start typing..."
                                aria-label="Search Ada's memories"
                                :disabled="isLoading"
                            >
                            <button 
                                @click="performSearch"
                                class="search-btn"
                                type="button"
                                :disabled="!searchQuery.trim() || isLoading"
                                :aria-label="isLoading ? 'Searching...' : 'Search'"
                            >
                                <i v-if="!isLoading" class="fas fa-arrow-right" aria-hidden="true"></i>
                                <i v-else class="fas fa-spinner fa-spin" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Results Section -->
                <section class="results-section" v-if="showResults" aria-labelledby="results-heading">
                    <h2 id="results-heading" class="sr-only">Search Results</h2>
                    
                    <!-- Error State -->
                    <div v-if="error" class="error-message" role="alert">
                        <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                        <p>{{ error }}</p>
                        <button @click="clearError" class="error-close" aria-label="Close error message">
                            <i class="fas fa-times" aria-hidden="true"></i>
                        </button>
                    </div>

                    <!-- No Results -->
                    <div v-else-if="searchResults.length === 0 && !isLoading" class="no-results">
                        <i class="fas fa-search" aria-hidden="true"></i>
                        <p>No results found for "{{ lastSearchQuery }}". Try a different question or rephrase your search.</p>
                    </div>

                    <!-- Results -->
                    <div v-else-if="searchResults.length > 0" class="results-container">
                        <div class="results-header">
                            <p class="results-meta">
                                You asked: "<span class="query-text">{{ lastSearchQuery }}</span>" 
                                <br>The most similar question in the database was 
                                "<span class="similar-question">{{ searchResults[0]?.question_text }}</span>"
                            </p>
                        </div>
                        
                        <div class="answer-container">
                            <h3 class="answer-label">Answer:</h3>
                            <div class="answer-content">
                                <p v-if="selectedAnswer" class="answer-text">{{ selectedAnswer.answer_text }}</p>
                                <div v-if="selectedAnswer" class="answer-meta">
                                    <span class="source-info">
                                        <i class="fas fa-calendar" aria-hidden="true"></i>
                                        {{ formatDate(selectedAnswer.source_date) }}
                                    </span>
                                    <span class="similarity-score">
                                        <i class="fas fa-chart-bar" aria-hidden="true"></i>
                                        {{ Math.round(searchResults[0]?.score * 100) }}% match
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Multiple Answers Navigation -->
                        <div v-if="searchResults[0]?.answers?.length > 1" class="answers-navigation">
                            <p class="answers-count">{{ searchResults[0].answers.length }} answers available</p>
                            <div class="answers-pagination">
                                <button 
                                    v-for="(answer, index) in searchResults[0].answers" 
                                    :key="answer.answer_id"
                                    @click="selectAnswer(answer, index)"
                                    :class="['answer-nav-btn', { 'active': selectedAnswerIndex === index }]"
                                    :aria-label="'View answer ' + (index + 1)"
                                >
                                    {{ index + 1 }}
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <div class="container">
                <p class="footer-text">
                    Â© 2024 Ada's Spark. Created with love in memory of Ada Rose Swenson.
                </p>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>